# Levantamento de Requisitos - ERP TapeÃ§aria

## 1. Requisitos Funcionais

### 1.1. MÃ³dulo de Pedidos
- Adicionar novas colunas Ã  tabela `pedidos`:
  - `obs_retirada` (Texto, opcional)
  - `tapeceiro` (Texto, opcional)
  - `andamento` (ENUM: retirar, montado, desmanchado, produzindo, entregar, concluÃ­do)
  - `data_inicio` (DATE)
  - `dificuldade` (Texto, opcional)
  - `previsto_para` (DATE)
  - `data_termino` (DATE)
  - `data_entrega` (DATE)
  - `ARPtech` (BOOLEAN, indica se hÃ¡ serviÃ§o ARPtech no pedido)
- Adicionar campo `ARPtech` tambÃ©m na tabela `itens`.
- Criar a tabela `ARPtech`:
  - `id` (INT, PK)
  - `tipo_servico` (ENUM: impermeabilizaÃ§Ã£o, higienizaÃ§Ã£o, imper+higi)
  - `pedido_id` (INT, FK -> pedidos)
  - `item_id` (INT, FK -> itens)
  - `estado` (ENUM: aguardando, executado)
  - `custo` (DECIMAL)
  - `servico_pg` (ENUM: PAGO, PENDENTE)
- Regras de negÃ³cio:
  - Se algum item do pedido for marcado com `ARPtech`, criar uma entrada na tabela `ARPtech` vinculada ao `pedido_id` e `item_id`, definindo o tipo de serviÃ§o e alterando `pedidos.ARPtech` para SIM.

### 1.2. PÃ¡gina de Filtros
Criar uma pÃ¡gina para pesquisa de itens por:
  - ID
  - Nome do Cliente
  - CPF
  - Data do Pedido
  - EndereÃ§o
  - Data de Retirada
  - Profissional
  - Data de TÃ©rmino
  - ARPtech
  - Andamento

### 1.3. ImpressÃ£o de Pedidos
Ajustar a funcionalidade de impressÃ£o com diferentes modelos:
  - Modelo Cliente
  - Modelo Retirada
  - Modelo Profissional

### 1.4. Tabela de AssistÃªncias
Criar uma nova tabela para controle de assistÃªncias prestadas.

### 1.5. MÃ³dulo de Profissionais
Criar a tabela `profissionais`:
  - `id` (INT, PK)
  - `nome` (VARCHAR)
  - `cargo` (VARCHAR)
  - `salario` (DECIMAL)
  - `vt` (DECIMAL)
  - Outros campos a serem definidos.

## 2. MÃ³dulo de AdministraÃ§Ã£o Financeira

### 2.1. Tabela de Pagamentos
Criar a tabela `pagamentos`:
  - `id` (INT, PK)
  - `data_vencimento` (DATE)
  - `valor` (DECIMAL)
  - `status` (ENUM: Pendente, Pago, Atrasado)
  - `id_fornecedor` (INT, FK -> fornecedores)
  - `id_funcionario` (INT, FK -> profissionais)
  - `id_conta` (INT, FK -> contas)
  - `id_categoria` (INT, FK -> categorias_pagamento)
  - `id_forma_pagamento` (INT, FK -> formas_pagamento)
  - `data_pagamento` (DATE)
  - `observacoes` (TEXT)
  - `anexos` (Arquivo opcional)

### 2.2. Tabela de Fornecedores
Criar a tabela `fornecedores`:
  - `id` (INT, PK)
  - `nome` (VARCHAR)
  - `documento` (VARCHAR)
  - `endereco` (VARCHAR)
  - `telefone` (VARCHAR)

### 2.3. Tabela de Contas
Criar a tabela `contas`:
  - `id` (INT, PK)
  - `descricao` (VARCHAR)
  - `valor` (DECIMAL)
  - `data_vencimento` (DATE)

### 2.4. Tabela de Formas de Pagamento
Criar a tabela `formas_pagamento`:
  - `id` (INT, PK)
  - `descricao` (VARCHAR)

### 2.5. Tabela de Categorias de Pagamento
Criar a tabela `categorias_pagamento`:
  - `id` (INT, PK)
  - `descricao` (VARCHAR)

## 3. Relacionamentos
- `pagamentos` â†’ `fornecedores` (1:N)
- `pagamentos` â†’ `profissionais` (1:N)
- `pagamentos` â†’ `contas` (1:N)
- `pagamentos` â†’ `formas_pagamento` (N:1)
- `pagamentos` â†’ `categorias_pagamento` (N:1)

## 4. PÃ¡gina para Registro de Pagamentos
Criar uma interface para registrar novos pagamentos, vinculando a uma conta, fornecedor ou funcionÃ¡rio, com possibilidade de anexar documentos e observaÃ§Ãµes.

1ï¸âƒ£ MÃ³dulo de Pedidos e ProduÃ§Ã£o
ğŸ”¹ HistÃ³rico de alteraÃ§Ãµes nos pedidos (para saber quem fez cada mudanÃ§a e quando).
ğŸ”¹ CÃ¡lculo automÃ¡tico de prazo com base na dificuldade e no tempo mÃ©dio dos serviÃ§os.
ğŸ”¹ NotificaÃ§Ãµes internas para tapeceiros sobre novos pedidos atribuÃ­dos.
ğŸ”¹ IntegraÃ§Ã£o com WhatsApp para notificar clientes sobre o andamento do pedido.
ğŸ”¹ Gerenciamento de peÃ§as (para estofados que precisam de espuma, molas, tecidos especÃ­ficos).

2ï¸âƒ£ MÃ³dulo Financeiro
ğŸ”¹ RelatÃ³rio de fluxo de caixa com totais recebidos, gastos e saldo.
ğŸ”¹ GeraÃ§Ã£o de boletos e integraÃ§Ã£o com PIX para pagamentos.
ğŸ”¹ CÃ¡lculo de comissÃ£o para tapeceiros baseado nos serviÃ§os concluÃ­dos.
ğŸ”¹ Parcelamento de pagamentos (se clientes pagarem em vÃ¡rias vezes).
ğŸ”¹ Controle de despesas fixas (exemplo: aluguel, energia, Ã¡gua).

3ï¸âƒ£ MÃ³dulo de GestÃ£o de Clientes
ğŸ”¹ Cadastro de clientes recorrentes para evitar redigitaÃ§Ã£o de dados.
ğŸ”¹ HistÃ³rico de atendimentos para saber quantos serviÃ§os jÃ¡ foram feitos para cada cliente.
ğŸ”¹ Sistema de fidelidade (descontos para clientes que jÃ¡ fizeram X pedidos).
ğŸ”¹ Envio automÃ¡tico de lembretes (exemplo: "seu pedido estarÃ¡ pronto em 3 dias").

4ï¸âƒ£ MÃ³dulo de Recursos Humanos
ğŸ”¹ GestÃ£o de funcionÃ¡rios com controle de ponto e pagamento de salÃ¡rios.
ğŸ”¹ CÃ¡lculo automÃ¡tico de benefÃ­cios (VT, VR, horas extras, comissÃµes).
ğŸ”¹ RelatÃ³rios de produtividade (quantidade de pedidos finalizados por tapeceiro).
ğŸ”¹ Controle de fÃ©rias e afastamentos.

5ï¸âƒ£ RelatÃ³rios e EstatÃ­sticas
ğŸ”¹ Painel com grÃ¡ficos para acompanhar pedidos em andamento, faturamento mensal, clientes atendidos, etc.
ğŸ”¹ RelatÃ³rio de produtividade para saber quais serviÃ§os demoram mais e onde otimizar processos.
ğŸ”¹ ExportaÃ§Ã£o de dados para Excel/PDF.


DESENVOLVIMENTO


Vamos estruturar cada funcionalidade com os seguintes detalhes:

Tabelas no banco de dados (se precisar criar ou modificar alguma).

Campos principais (o que cada tabela precisa armazenar).

Regras de negÃ³cio (como a funcionalidade deve se comportar).

Interface (como serÃ¡ exibida no sistema).

1ï¸âƒ£ MÃ³dulo de Pedidos e ProduÃ§Ã£o
ğŸ“Œ HistÃ³rico de AlteraÃ§Ãµes nos Pedidos
ğŸ“‚ Nova tabela: historico_pedidos

Campo	Tipo	DescriÃ§Ã£o
id	INT (PK)	Identificador Ãºnico
pedido_id	INT (FK)	ReferÃªncia ao pedido alterado
usuario_id	INT (FK)	Quem fez a alteraÃ§Ã£o
campo	VARCHAR	Campo alterado
valor_antigo	TEXT	Valor antes da alteraÃ§Ã£o
valor_novo	TEXT	Novo valor
data_alteracao	DATETIME	Quando foi feita a mudanÃ§a
ğŸ”¹ Regra de NegÃ³cio: Toda vez que um pedido for atualizado, um registro Ã© criado nessa tabela.
ğŸ“Œ Interface: Criar uma aba "HistÃ³rico" na pÃ¡gina de detalhes do pedido.

ğŸ“Œ CÃ¡lculo AutomÃ¡tico de Prazo
ğŸ”¹ Regra de NegÃ³cio:

Se dificuldade = fÃ¡cil, previsto_para = data_inicio + 3 dias.

Se dificuldade = mÃ©dia, previsto_para = data_inicio + 7 dias.

Se dificuldade = difÃ­cil, previsto_para = data_inicio + 14 dias.

ğŸ“Œ Interface: Quando um novo pedido for criado, o sistema preencherÃ¡ automaticamente a data de previsÃ£o de tÃ©rmino.

ğŸ“Œ NotificaÃ§Ãµes Internas para Tapeceiros
ğŸ“‚ Nova tabela: notificacoes

Campo	Tipo	DescriÃ§Ã£o
id	INT (PK)	Identificador Ãºnico
usuario_id	INT (FK)	Tapeceiro que recebe a notificaÃ§Ã£o
mensagem	TEXT	Texto da notificaÃ§Ã£o
lida	BOOLEAN	Se jÃ¡ foi visualizada
data_envio	DATETIME	Quando foi enviada
ğŸ“Œ Interface: Ãcone de "sino" no sistema mostrando notificaÃ§Ãµes pendentes.

ğŸ“Œ IntegraÃ§Ã£o com WhatsApp
ğŸ”¹ Regras de NegÃ³cio:

Quando o status de um pedido muda para "Pronto para retirada", enviar uma mensagem via API do WhatsApp.
ğŸ“Œ Interface: BotÃ£o "Notificar Cliente" dentro dos pedidos.

2ï¸âƒ£ MÃ³dulo Financeiro
ğŸ“Œ RelatÃ³rio de Fluxo de Caixa
ğŸ“Œ Interface: Criar pÃ¡gina "Financeiro" com grÃ¡ficos de entrada e saÃ­da de dinheiro.
ğŸ“Œ SQL:

sql
Copiar
Editar
SELECT SUM(valor) AS total, status 
FROM pagamentos 
GROUP BY status;
ğŸ“Œ GeraÃ§Ã£o de Boletos e PIX
ğŸ“Œ Requisitos:

API de pagamento (exemplo: Gerencianet, Mercado Pago).
ğŸ“Œ Interface:

BotÃ£o "Gerar Boleto/Pix" na tela de pagamentos.

ğŸ“Œ CÃ¡lculo de ComissÃ£o para Tapeceiros
ğŸ“‚ Novo campo na tabela profissionais

Campo	Tipo	DescriÃ§Ã£o
comissao	DECIMAL	Percentual sobre os serviÃ§os concluÃ­dos
ğŸ“Œ Regra de NegÃ³cio: O sistema calcula a comissÃ£o de cada tapeceiro baseado nos pedidos finalizados.

3ï¸âƒ£ MÃ³dulo de GestÃ£o de Clientes
ğŸ“Œ HistÃ³rico de Atendimentos
ğŸ“‚ Nova tabela: historico_clientes

Campo	Tipo	DescriÃ§Ã£o
id	INT (PK)	Identificador Ãºnico
cliente_id	INT (FK)	Cliente atendido
descricao	TEXT	O que foi feito
data	DATETIME	Quando foi realizado
ğŸ“Œ Interface: Aba "HistÃ³rico" na tela do cliente.

ğŸ“Œ Sistema de Fidelidade
ğŸ“‚ Novo campo na tabela clientes

Campo	Tipo	DescriÃ§Ã£o
pontos	INT	Pontos acumulados para desconto
ğŸ“Œ Regra de NegÃ³cio: Cada R$100 gastos = 10 pontos. A cada 100 pontos, desconto de R$10.

4ï¸âƒ£ MÃ³dulo de Recursos Humanos
ğŸ“Œ GestÃ£o de FuncionÃ¡rios
ğŸ“‚ Nova tabela: funcionarios

Campo	Tipo	DescriÃ§Ã£o
id	INT (PK)	Identificador
nome	VARCHAR	Nome do funcionÃ¡rio
cargo	VARCHAR	Cargo ocupado
salario	DECIMAL	SalÃ¡rio base
ğŸ“Œ Interface: PÃ¡gina "FuncionÃ¡rios" com detalhes de cada um.

ğŸ“Œ Controle de FÃ©rias
ğŸ“‚ Novo campo na tabela funcionarios

Campo	Tipo	DescriÃ§Ã£o
data_ferias	DATE	PrÃ³xima data de fÃ©rias
ğŸ“Œ Regra de NegÃ³cio: O sistema deve alertar 30 dias antes da data de fÃ©rias.

5ï¸âƒ£ RelatÃ³rios e EstatÃ­sticas
ğŸ“Œ Painel de GrÃ¡ficos
ğŸ“Œ Interface: Criar uma dashboard mostrando:
âœ… NÃºmero de pedidos em andamento
âœ… Faturamento do mÃªs
âœ… Clientes novos

ğŸ“Œ SQL para faturamento mensal:

sql
Copiar
Editar
SELECT MONTH(data_pagamento) AS mes, SUM(valor) AS total 
FROM pagamentos 
WHERE status = 'Pago' 
GROUP BY MONTH(data_pagamento);
